package com.cc.service;

import java.util.List;

import org.springframework.stereotype.Service;

import com.cc.entity.Coin;
import com.cc.entity.CoinWallet;
import com.cc.exception.CoinException;
import com.cc.exception.CoinWalletException;
import com.cc.exception.UserException;
import com.cc.exception.WalletException;

@Service
public class CoinWalletServiceImpl implements CoinWalletService{

	@Override
	public CoinWallet addCryptoCoinsToWalletByQuantity(Integer userId, Integer cryptoId, Integer quantity)
			throws CoinException, CoinWalletException, UserException, WalletException {
		CoinWallet coinWallet = getCoinWalletByUserId(userId);
		List<Coin> walletCrytpoCoins =  coinWallet.getCoins();
		
		Crypto crypto = cryptoRepo.getById(cryptoId);
		if(crypto.getQuantity()>=quantity) {
			Users users = usersRepo.getById(userId);
			if(users.getWallet().getAvailableAmount()>=crypto.getCurrentCryptoValue()) {
				cryptoWallet.getCryptos().add(crypto);
				users.getWallet().setAvailableAmount(users.getWallet().getAvailableAmount()-crypto.getCurrentCryptoValue());
				return cryptoWalletRepo.save(cryptoWallet);

			}
			throw new WalletException(Constants.Insufficient_Funds);
		}
		throw new CryptoException(Constants.Insufficient_coins);
	}

	@Override
	public CoinWallet getCoinWalletByUserId(Integer userId) throws CoinWalletException, UserException {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public CoinWallet getCoinWallet(Integer cryptoWalletId) throws CoinWalletException, UserException {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public CoinWallet deleteCoinWallet(Integer cryptoWalletId) throws CoinWalletException, UserException {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public CoinWallet deleteCryptoCoinsFromWalletByQuantity(Integer cryptoCoinId, Double quantity)
			throws CoinException, CoinWalletException, UserException {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public CoinWallet deleteCryptoCoinsFromWalletByAmount(Integer cryptoCoinId, Double Amount)
			throws CoinException, CoinWalletException, UserException {
		// TODO Auto-generated method stub
		return null;
	}

}
