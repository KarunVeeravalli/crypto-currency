package com.cc.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.cc.dto.Btw;
import com.cc.exception.BankException;
import com.cc.exception.UserException;
import com.cc.exception.WalletException;
import com.cc.service.WalletService;
import com.cc.utilityHelper.GeneralResponse;

@RestController
@RequestMapping("/wallet")
public class WalletController { 
	
	@Autowired
	WalletService service;
	
	@PostMapping("/addMoneyToWallet/{userId}")
	ResponseEntity<GeneralResponse> addMoneyToWallet(@PathVariable Integer userId,Btw addMoneyFromBankToWallet) throws UserException,WalletException,BankException{
		GeneralResponse generalResponse = new GeneralResponse();
		generalResponse.setMessage("Money has been added to the wallet by user Id: "+userId);
		generalResponse.setData(service.addMoneyToWallet(userId, addMoneyFromBankToWallet));
		return ResponseEntity.ok(generalResponse);
	}
	
	@PostMapping("/takeMoneyFromWallet/{userId}")
	ResponseEntity<GeneralResponse> takeMoneyFromWallet(@PathVariable Integer userId, Btw sendMoneyFromWalletToBank) throws UserException,WalletException,BankException{
		GeneralResponse generalResponse = new GeneralResponse();
		generalResponse.setMessage("Money has been deducted from the wallet by user Id: "+userId);
		generalResponse.setData(service.takeMoneyFromWallet(userId, sendMoneyFromWalletToBank));
		return ResponseEntity.ok(generalResponse);
	}
	
	@GetMapping("/getWalletByUserId/{userId}")
	ResponseEntity<GeneralResponse> getWalletByUserId(@PathVariable Integer userId) throws UserException,WalletException{
		GeneralResponse generalResponse = new GeneralResponse();
		generalResponse.setMessage("wallet was found by user Id: "+userId);
		generalResponse.setData(service.getWalletByUserId(userId));
		return ResponseEntity.ok(generalResponse);
	}
	
	@GetMapping("/getWalletById/{walletId}")
	ResponseEntity<GeneralResponse> getWalletById(@PathVariable Integer walletId) throws UserException,WalletException{
		GeneralResponse generalResponse = new GeneralResponse();
		generalResponse.setMessage("Mwallet was found by wallet Id: "+walletId);
		generalResponse.setData(service.getWalletById(walletId));
		return ResponseEntity.ok(generalResponse);
	}
	
	@DeleteMapping("/deleteWalletById")
	ResponseEntity<GeneralResponse> deleteWalletById(Integer walletId) throws UserException,WalletException{
		GeneralResponse generalResponse = new GeneralResponse();
		generalResponse.setMessage("wallet has been deleted by wallet Id: "+walletId);
		generalResponse.setData(service.deleteWalletById(walletId));
		return ResponseEntity.ok(generalResponse);
	}
	
}
